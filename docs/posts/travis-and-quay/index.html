<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Using Travis to push container images to Quay.io | Adrian's Blog</title><meta name=keywords content><meta name=description content="Preface This blog post assumes:
The user is familiar with: Travis-ci Docker (or podman/buildah) Git Github The user has an account with: Travis-ci Github Quay For those unfamiliar with the above, here are some resources
Introduction I prefer using Quay.io as my container registry instead of Dockerhub, and as such, I had to learn how setup Travis to push to quay.io. This is something I hadn&rsquo;t done before, as I&rsquo;ve only recently started making my own container images."><meta name=author content="Adrian Lucrèce Céleste"><link rel=canonical href=https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/posts/travis-and-quay/><link crossorigin=anonymous href=/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/apple-touch-icon.png><link rel=mask-icon href=https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Using Travis to push container images to Quay.io"><meta property="og:description" content="Preface This blog post assumes:
The user is familiar with: Travis-ci Docker (or podman/buildah) Git Github The user has an account with: Travis-ci Github Quay For those unfamiliar with the above, here are some resources
Introduction I prefer using Quay.io as my container registry instead of Dockerhub, and as such, I had to learn how setup Travis to push to quay.io. This is something I hadn&rsquo;t done before, as I&rsquo;ve only recently started making my own container images."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/posts/travis-and-quay/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-01-24T20:02:00+00:00"><meta property="article:modified_time" content="2019-01-24T20:02:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Using Travis to push container images to Quay.io"><meta name=twitter:description content="Preface This blog post assumes:
The user is familiar with: Travis-ci Docker (or podman/buildah) Git Github The user has an account with: Travis-ci Github Quay For those unfamiliar with the above, here are some resources
Introduction I prefer using Quay.io as my container registry instead of Dockerhub, and as such, I had to learn how setup Travis to push to quay.io. This is something I hadn&rsquo;t done before, as I&rsquo;ve only recently started making my own container images."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/posts/"},{"@type":"ListItem","position":3,"name":"Using Travis to push container images to Quay.io","item":"https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/posts/travis-and-quay/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Using Travis to push container images to Quay.io","name":"Using Travis to push container images to Quay.io","description":"Preface This blog post assumes:\nThe user is familiar with: Travis-ci Docker (or podman/buildah) Git Github The user has an account with: Travis-ci Github Quay For those unfamiliar with the above, here are some resources\nIntroduction I prefer using Quay.io as my container registry instead of Dockerhub, and as such, I had to learn how setup Travis to push to quay.io. This is something I hadn\u0026rsquo;t done before, as I\u0026rsquo;ve only recently started making my own container images.","keywords":[],"articleBody":"Preface This blog post assumes:\nThe user is familiar with: Travis-ci Docker (or podman/buildah) Git Github The user has an account with: Travis-ci Github Quay For those unfamiliar with the above, here are some resources\nIntroduction I prefer using Quay.io as my container registry instead of Dockerhub, and as such, I had to learn how setup Travis to push to quay.io. This is something I hadn’t done before, as I’ve only recently started making my own container images.\nStep One: fork the tutorial repo I’ve setup a repo on github that I’ll be using as a guide for this tutorial, it can be found here. All you need to do is press the Fork button:\nThis will make a copy of my repo for you to use with your account. The next step is to clone this repo:\ngit clone git@github.com:AdrianKoshka/travis-quay-tutorial.git\nYou can find the URL to clone from when you press the Clone or download button.\nStep Two: Initial repo setup You’ll need to edit the .travis.yml and docker_push files in your repo, replacing [yourusername] with the username of your quay account.\nStep Three: Creating the quay repository When signed into quay, in the upper right-hand corner, you’ll see a + Create New Repository button. Click the button,\nYou’ll want to select Public instead of Private, and enter the repository name. Then click Create Public Repository. You’ve now created the empty repository we’ll be pushing our container image to later.\nStep Four: Creating the “Robot Account” Robot accounts are “accounts” in quay.io under your user used for automated tasks.\nAgain, in the upper right-hand corner, you’ll see the + button, click it, then click New Robot Account.\nYou’ll need to enter a name and description for the bot:\nPress Create Robot Account, now you’ll have to give the robot write permissions to the repo you just created:\nThen press Add Permissions. You’ll be taken to your robot account settings page now.\nClick the username of your newly created bot, it should bring up a window with your bots username and password.\nWe’ll need these creds later.\nStep Five: Adding variables to your repo on travis On Travis, go to your settings and click the sync account button. In the list of repositories should be your travis-quay-tutorial repo you forked earlier, activate it, and click on the settings button.\nScroll down to the section named Environment Variables, and add a variable name QUAY_BOT_USERNAME, put the username of your robot account that you saw in the previous section, you should be able to copy-paste it.\nPress the Add button. Add another variable called QUAY_BOT_PASSWORD and enter your bots password.\nYour Environment Variables section should look like this now:\nStep Six: Committing the changes from step two Now that you’ve set everything else up, you can commit your changes to .travis.yml and docker_push, then push your changes to your fork. This should trigger a build with travis, which will build the container, and then push it to the quay repository.\nResources Travis Core Concepts for Beginners Docker: What is a Container Docker: Get Started with Docker Podman: Basic Setup and Use of Podman Buildah: Tutorials Github Guides ","wordCount":"525","inLanguage":"en","datePublished":"2019-01-24T20:02:00Z","dateModified":"2019-01-24T20:02:00Z","author":{"@type":"Person","name":"Adrian Lucrèce Céleste"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/posts/travis-and-quay/"},"publisher":{"@type":"Organization","name":"Adrian's Blog","logo":{"@type":"ImageObject","url":"https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.adrianlucr%C3%A8cec%C3%A9leste.page accesskey=h title="Adrian's Blog (Alt + H)">Adrian's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://blog.adrianlucr%C3%A8cec%C3%A9leste.page/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Using Travis to push container images to Quay.io</h1><div class=post-meta><span title='2019-01-24 20:02:00 +0000 UTC'>January 24, 2019</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Adrian Lucrèce Céleste</div></header><div class=post-content><h2 id=preface>Preface<a hidden class=anchor aria-hidden=true href=#preface>#</a></h2><p>This blog post assumes:</p><ul><li>The user is familiar with:<ul><li><a href=https://travis-ci.org>Travis-ci</a></li><li><a href=https://www.docker.com/>Docker</a> (or <a href=https://podman.io>podman</a>/<a href=https://buildah.io>buildah</a>)</li><li><a href=https://git-scm.com/>Git</a></li><li><a href=https://github.com>Github</a></li></ul></li><li>The user has an account with:<ul><li><a href=https://travis-ci.org>Travis-ci</a></li><li><a href=https://github.com>Github</a></li><li><a href=https://quay.io>Quay</a></li></ul></li></ul><p>For those unfamiliar with the above, here are some <a href=#resources>resources</a></p><h1 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h1><p>I prefer using <a href=https://quay.io>Quay.io</a> as my container registry instead of
<a href=https://hub.docker.com>Dockerhub</a>, and as such, I had to learn how setup
<a href=https://travis-ci.org>Travis</a> to push to <a href=https://quay.io>quay.io</a>. This is
something I hadn&rsquo;t done before, as I&rsquo;ve only recently started making my own
container images.</p><h3 id=step-one-fork-the-tutorial-repo>Step One: fork the tutorial repo<a hidden class=anchor aria-hidden=true href=#step-one-fork-the-tutorial-repo>#</a></h3><p>I&rsquo;ve setup a repo on github that I&rsquo;ll be using as a guide for this tutorial, it
can be found <a href=https://github.com/AdrianKoshka/travis-quay-tutorial>here</a>. All
you need to do is press the <code>Fork</code> button:</p><p><img loading=lazy src=/blog/imgs/fork-button.png alt="fork button"></p><p>This will make a copy of my repo for you to use with your account. The next step
is to clone this repo:</p><p><code>git clone git@github.com:AdrianKoshka/travis-quay-tutorial.git</code></p><p>You can find the URL to clone from when you press the <code>Clone or download</code> button.</p><p><img loading=lazy src=/blog/imgs/clone-button-quay-travis-tut.png alt="clone or download button"></p><h3 id=step-two-initial-repo-setup>Step Two: Initial repo setup<a hidden class=anchor aria-hidden=true href=#step-two-initial-repo-setup>#</a></h3><p>You&rsquo;ll need to edit the <code>.travis.yml</code> and <code>docker_push</code> files in your repo,
replacing <code>[yourusername]</code> with the username of your quay account.</p><h3 id=step-three-creating-the-quay-repository>Step Three: Creating the quay repository<a hidden class=anchor aria-hidden=true href=#step-three-creating-the-quay-repository>#</a></h3><p>When signed into quay, in the upper right-hand corner, you&rsquo;ll see a
<code>+ Create New Repository</code> button. Click the button,</p><p><img loading=lazy src=/blog/imgs/quay-plus-button.png alt="quay plus button"></p><p>You&rsquo;ll want to select <code>Public</code> instead of <code>Private</code>, and enter the repository name.
Then click <code>Create Public Repository</code>. You&rsquo;ve now created the empty repository
we&rsquo;ll be pushing our container image to later.</p><p><img loading=lazy src=/blog/imgs/quay-new-repo.png alt="quay new repo"></p><h3 id=step-four-creating-the-robot-account>Step Four: Creating the &ldquo;Robot Account&rdquo;<a hidden class=anchor aria-hidden=true href=#step-four-creating-the-robot-account>#</a></h3><p>Robot accounts are &ldquo;accounts&rdquo; in quay.io under your user used for automated tasks.</p><p>Again, in the upper right-hand corner, you&rsquo;ll see the <code>+</code> button, click it, then
click <code>New Robot Account</code>.</p><p><img loading=lazy src=/blog/imgs/new-robot-account.png alt="New Robot Account"></p><p>You&rsquo;ll need to enter a name and description for the bot:</p><p><img loading=lazy src=/blog/imgs/create-robot-step-one.png alt="Create Robot Account Step 1"></p><p>Press <code>Create Robot Account</code>, now you&rsquo;ll have to give the robot write
permissions to the repo you just created:</p><p><img loading=lazy src=/blog/imgs/robot-give-privs.png alt="Give Robot privileges"></p><p>Then press <code>Add Permissions</code>. You&rsquo;ll be taken to your robot account settings
page now.</p><p><img loading=lazy src=/blog/imgs/robot-account-settings.png alt="Robot Settings Page"></p><p>Click the username of your newly created bot, it should bring up a window
with your bots username and password.</p><p><img loading=lazy src=/blog/imgs/bot-creds.png alt="Bot username and password"></p><p>We&rsquo;ll need these creds later.</p><h3 id=step-five-adding-variables-to-your-repo-on-travis>Step Five: Adding variables to your repo on travis<a hidden class=anchor aria-hidden=true href=#step-five-adding-variables-to-your-repo-on-travis>#</a></h3><p>On Travis, go to your settings and click the <code>sync account</code> button. In the list
of repositories should be your <code>travis-quay-tutorial</code> repo you forked earlier,
activate it, and click on the <code>settings</code> button.</p><p><img loading=lazy src=/blog/imgs/travis-settings.png alt="Travis Settings"></p><p>Scroll down to the section named <code>Environment Variables</code>, and add a variable
name <code>QUAY_BOT_USERNAME</code>, put the username of your robot account that you saw
in the previous section, you should be able to copy-paste it.</p><p><img loading=lazy src=/blog/imgs/travis-env-var-username.png alt="Add QUAY_BOT_USERNAME"></p><p>Press the <code>Add</code> button. Add another variable called <code>QUAY_BOT_PASSWORD</code> and
enter your bots password.</p><p>Your <code>Environment Variables</code> section should look like this now:</p><p><img loading=lazy src=/blog/imgs/travis-env-var-after.png alt="Travis Environmental Variables After"></p><h3 id=step-six-committing-the-changes-from-step-two>Step Six: Committing the changes from step two<a hidden class=anchor aria-hidden=true href=#step-six-committing-the-changes-from-step-two>#</a></h3><p>Now that you&rsquo;ve set everything else up, you can commit your changes to
<code>.travis.yml</code> and <code>docker_push</code>, then push your changes to your fork. This
should trigger a build with travis, which will build the container, and then
push it to the quay repository.</p><h2 id=resources>Resources<a hidden class=anchor aria-hidden=true href=#resources>#</a></h2><ul><li><a href=https://docs.travis-ci.com/user/for-beginners>Travis Core Concepts for Beginners</a></li><li><a href=https://www.docker.com/resources/what-container>Docker: What is a Container</a></li><li><a href=https://www.docker.com/get-started>Docker: Get Started with Docker</a></li><li><a href=https://github.com/containers/libpod/blob/master/docs/tutorials/podman_tutorial.md>Podman: Basic Setup and Use of Podman</a></li><li><a href=https://github.com/containers/buildah/tree/master/docs/tutorials>Buildah: Tutorials</a></li><li><a href=https://guides.github.com/>Github Guides</a></li></ul></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.adrianlucr%C3%A8cec%C3%A9leste.page>Adrian's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>